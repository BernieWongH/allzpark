



<!doctype html>
<html lang="en" class="no-js">
  <head>
    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The package-based application launcher">
      
      
        <link rel="canonical" href="https://allzpark.com/avalon/">
      
      
        <meta name="author" content="mottosso">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500|Source+Code+Pro" rel="stylesheet">

    
      
        <title>Avalon - Allzpark</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#walkthrough" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://allzpark.com" title="Allzpark" class="md-header-nav__button md-logo">
          
            <img src="../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Allzpark
            </span>
            <span class="md-header-nav__topic">
              
                Avalon
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/mottosso/allzpark/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mottosso/allzpark
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://allzpark.com" title="Allzpark" class="md-nav__button md-logo">
      
        <img src="../logo.png" width="48" height="48">
      
    </a>
    Allzpark
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/mottosso/allzpark/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mottosso/allzpark
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quickstart" class="md-nav__link">
      Quickstart
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-advanced/" title="Getting Advanced" class="md-nav__link">
      Getting Advanced
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rez/" title="Getting Rez'd" class="md-nav__link">
      Getting Rez'd
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../reference/" title="Reference" class="md-nav__link">
      Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../shells/" title="Shells" class="md-nav__link">
      Shells
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#walkthrough" title="Walkthrough" class="md-nav__link">
    Walkthrough
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" title="Quickstart" class="md-nav__link">
    Quickstart
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bleed-profile" title="Bleed Profile" class="md-nav__link">
    Bleed Profile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#differences" title="Differences" class="md-nav__link">
    Differences
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" title="Todo" class="md-nav__link">
    Todo
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
<small class="modified-date"><br><i>Updated 2019-08-05</i></small>

                
                  <a href="https://github.com/mottosso/allzpark/edit/master/docs/pages/avalon.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Avalon</h1>
                
                <p>This page provides a transition guide from using <a href="https://getavalon.github.io">Avalon</a>'s native Launcher to Allzpark.</p>
<p><br></p>
<h3 id="walkthrough">Walkthrough</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/5BkQL6TG1-A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p><br></p>
<h3 id="quickstart">Quickstart</h3>
<p>This part assumes a successful <a href="/quickstart">Quickstart</a>.</p>
<div class="tabs">
  <button class="tab powershell " onclick="setTab(event, 'powershell')"><p>powershell</p><div class="tab-gap"></div></button>
  <button class="tab bash " onclick="setTab(event, 'bash')"><p>bash</p><div class="tab-gap"></div></button>
</div>

<div class="tab-content powershell">
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">mkdir</span> <span style="color: #f8f8f2">$env:USERPROFILE/projects</span>
<span style="color: #f8f8f2">subst</span> <span style="color: #f8f8f2">P</span><span style="color: #960050; background-color: #1e0010">:</span> <span style="color: #f8f8f2">$env:USERPROFILE/projects</span>
<span style="color: #f8f8f2">$env:REZ_PACKAGES_PATH=</span><span style="color: #e6db74">&quot;~/packages;</span><span style="color: #f8f8f2">$(allzparkdemo</span> <span style="color: #f8f8f2">--packages)</span><span style="color: #e6db74">&quot;</span>
<span style="color: #f8f8f2">$env:MY_PROFILES=</span><span style="color: #e6db74">&quot;bleed&quot;</span>
</pre></div>

</div>
<div class="tab-content bash">
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>mkdir ~/projects
<span style="color: #f8f8f2">$REZ_PACKAGES_PATH</span><span style="color: #f92672">=</span>~/packages:<span style="color: #66d9ef">$(</span>allzparkdemo --packages<span style="color: #66d9ef">)</span>
<span style="color: #f8f8f2">$MY_PROFILES</span><span style="color: #f92672">=</span>bleed
</pre></div>

</div>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># Convert PyPI packages to Rez</span>
git clone https://github.com/mottosso/rez-pipz.git
<span style="color: #f8f8f2">cd</span> rez-pipz
rez build --install
<span style="color: #f8f8f2">cd</span> ..

<span style="color: #75715e"># Install PyPI dependencies</span>
rez env pipz -- install avalon-core avalon-colorbleed
rez env pipz -- install <span style="color: #f8f8f2">pyqt5</span><span style="color: #f92672">==</span><span style="color: #ae81ff">5</span>.8  <span style="color: #75715e"># Any PyQt5 would do, this one requires Python 3</span>

<span style="color: #75715e"># Install Avalon demo project</span>
git clone https://github.com/mottosso/bleed.git
<span style="color: #f8f8f2">cd</span> bleed
rez build --install
python -m avalon.inventory --save

<span style="color: #75715e"># Launch!</span>
allzpark --demo
</pre></div>

<details class="question"><summary><code>~/projects</code></summary><p>For the purposes of this demo, the Avalon projects are assumed to be in this directory.</p>
</details>
<details class="question"><summary>pipz</summary><p>These are the base requirements for running Avalon</p>
</details>
<details class="question"><summary>REZ_PACKAGES_PATH</summary><p>For the purposes of this demo, we'll expose the Allzpark demo packages, primarily <code>maya</code>, <code>blender</code> and <code>rezutil</code> for use when building <code>bleed</code>. We could also have made a <code>maya</code>, <code>blender</code> and <code>rezutil</code> package globally, and skipped this step.</p>
</details>
<details class="question"><summary>avalon.inventory</summary><p>We'll also need this project uploaded to Avalon's MongoDB database. I'd like to skip this step, to instead automatically create projects post-launch, based on variables set in the Allzpark profile.</p>
</details>
<p><br></p>
<h3 id="bleed-profile">Bleed Profile</h3>
<p>Let's have a look at how <code>bleed</code> is laid out.</p>
<ul>
<li><a href="https://github.com/mottosso/bleed/blob/master/package.py">bleed/package.py</a></li>
</ul>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;bleed&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.0.15&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;python -m rezutil build {root}&quot;</span>
<span style="color: #f8f8f2">private_build_requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;rezutil-1&quot;</span><span style="color: #f8f8f2">]</span>
</pre></div>

<p>Nothing special here; we're building on the <code>rezutil</code> package from the Allzpark demo library to simplify the installation somewhat, it handles copying of the contained <code>userSetup.py</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">_requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span>
    <span style="color: #e6db74">&quot;~blender==2.80.0&quot;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #e6db74">&quot;~maya==2015.0.0|2016.0.2|2017.0.4|2018.0.6&quot;</span><span style="color: #f8f8f2">,</span>

    <span style="color: #e6db74">&quot;pymongo-3.4+&quot;</span><span style="color: #f8f8f2">,</span>

    <span style="color: #e6db74">&quot;avalon_core-5.2+&quot;</span><span style="color: #f8f8f2">,</span>
    <span style="color: #e6db74">&quot;avalon_colorbleed-1&quot;</span><span style="color: #f8f8f2">,</span>
<span style="color: #f8f8f2">]</span>
</pre></div>

<p>Again we're referencing <code>blender</code> and <code>maya</code> from the demo library, in this case a number of versions of Maya to cover all bases. Allzpark displays every version that matches this pattern, in this case 4 versions of Maya.</p>
<p><code>pymongo</code> is the only real dependency to Avalon, the others being vendored, due to being the only one that isn't a pure-Python library. Finally, Avalon core and the colorbleed config is added are requirements to this profile.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #a6e22e">@late</span><span style="color: #f8f8f2">()</span>
<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">requires</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">this</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">request</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">in_context</span>

    <span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">this</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">_requires</span>

    <span style="color: #75715e"># Add request-specific requirements</span>
    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">in_context():</span>
        <span style="color: #66d9ef">if</span> <span style="color: #e6db74">&quot;maya&quot;</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">request:</span>
            <span style="color: #f8f8f2">requires</span> <span style="color: #f92672">+=</span> <span style="color: #f8f8f2">[</span>
                <span style="color: #e6db74">&quot;mgear&quot;</span><span style="color: #f8f8f2">,</span>
            <span style="color: #f8f8f2">]</span>

    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">requires</span>
</pre></div>

<p>You'll notices the previous <code>_requires = []</code> had an underscore in it, which makes it invisible to Rez. Instead, we use this function <code>requires()</code> with a <code>@late()</code> decorator which makes Rez compute the requirements of this package when called, as opposed to when built.</p>
<p>If called during built, the previously specified requirements are included. However, when called the <code>in_context()</code> function evaluates to <code>True</code> which in turn queries the request we made, e.g. <code>rez env bleed maya</code>, for whether "maya" was included. If so, then it goes ahead and appends <code>mgear</code> as another requirement for this profile.</p>
<p>This is how you can specifiy <em>conditional</em> requirements for a given profile, requirements that come into effect only when used in combination with a particular set of requirements, like <code>maya</code>. In this case, <code>mgear</code> is only relevant to Maya, and not Blender.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #f92672">import</span> <span style="color: #f8f8f2">os</span>
    <span style="color: #f92672">import</span> <span style="color: #f8f8f2">tempfile</span>

    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">this</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">request</span>

    <span style="color: #75715e"># Better suited for a global/studio package</span>
    <span style="color: #f8f8f2">projects</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">r&quot;p:\projects&quot;</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">os</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;nt&quot;</span> <span style="color: #66d9ef">else</span> <span style="color: #e6db74">&quot;~/projects&quot;</span>

    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_PROJECTS&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">projects</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_CONFIG&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;colorbleed&quot;</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_PROJECT&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">this</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_EARLY_ADOPTER&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;yes&quot;</span>
</pre></div>

<p>Next we give configure Allzpark with the necessary environment variables.</p>
<ul>
<li><code>AVALON_PROJECTS</code> is typically a global value for your studio, and better suited for a package required by every profile, like a <code>global</code> or <code>studio</code> package. I've included it here to keep the example self-contained.</li>
<li><code>AVALON_CONFIG</code> here we reference the <code>avalon_colorbleed</code> requirement</li>
<li><code>AVALON_PROJECT</code> storing the project name into the environment, referencing the <code>this</code> variable, which is the equivalent of <code>self</code> from within a class; it references the members from outside of the <code>commands()</code> function, in this case the <code>name</code> of the package itself; "bleed"</li>
<li><code>AVALON_EARLY_ADOPTER</code> finally enabling some of the later features of Avalon</li>
</ul>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">if</span> <span style="color: #e6db74">&quot;maya&quot;</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">request:</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PYTHONPATH&quot;</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(</span><span style="color: #e6db74">&quot;{root}/maya&quot;</span><span style="color: #f8f8f2">)</span>  <span style="color: #75715e"># userSetup.py</span>
</pre></div>

<p>Another conditional event; the <code>bleed</code> package includes a folder of profile-specific Maya scripts that are added to <code>PYTHONPATH</code> only if <code>maya</code> is part of the request.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_TASK&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;modeling&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_ASSET&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;hero&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_SILO&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;asset&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_WORKDIR&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">tempfile</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">gettempdir()</span>
</pre></div>

<p>Finally, the members that we need to get rid of from the application launching process of Avalon; these need to happen post-launch.</p>
<p><br></p>
<h3 id="differences">Differences</h3>
<p>Overall, Allzpark and Launcher are very similar.</p>
<ul>
<li><strong>All Knowing</strong> Launcher has all the information related to a project, asset and task<ul>
<li>We'll need to split this responsibility and let Allzpark handle anything related to application startup, but leave assets and tasks to Avalon</li>
</ul>
</li>
<li><strong>Working Directory</strong> Launcher is responsible for creating a working directory, <em>prior</em> to application launch<ul>
<li>Because is knows all of these things, it's a good fit for creating the initial working directory wherein an application saves data, like Maya's <code>workspace.mel</code> file and associated hierarchy. Because Allzpark isn't concerned with such things, we'll need to let the host deal with this.</li>
<li>An upside of this is that artists would then be able to switch task/asset/shot without a restart</li>
</ul>
</li>
</ul>
<p><br></p>
<h3 id="todo">Todo</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" disabled/> <strong>DB</strong> Create Avalon MongoDB project document post-launch</li>
<li class="task-list-item"><input type="checkbox" disabled/> <strong>Working Directory</strong> Create working directory post-launch<ul>
<li>E.g. via "Set Context"</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled checked/> Create new assets interactively, rather than from .toml<ul>
<li>I.e. launch "Project Manager" from Allzpark</li>
</ul>
</li>
</ul>
<p>The above example works, but embeds too much information into the Allzpark profile, notably these:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_TASK&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;modeling&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_ASSET&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;hero&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_SILO&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;asset&quot;</span>
<span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;AVALON_WORKDIR&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">tempfile</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">gettempdir()</span>
</pre></div>
                
                  
                
              

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 mottosso
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="../extra.js"></script>
      
    
  </body>
</html>