



<!doctype html>
<html lang="en" class="no-js">
  <head>
    

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The package-based application launcher">
      
      
        <link rel="canonical" href="https://allzpark.com/guides/">
      
      
        <meta name="author" content="mottosso">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500|Source+Code+Pro" rel="stylesheet">

    
      
        <title>Guide - Allzpark</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#in-development" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://allzpark.com" title="Allzpark" class="md-header-nav__button md-logo">
          
            <img src="../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Allzpark
            </span>
            <span class="md-header-nav__topic">
              
                Guide
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/mottosso/allzpark/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mottosso/allzpark
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://allzpark.com" title="Allzpark" class="md-nav__button md-logo">
      
        <img src="../logo.png" width="48" height="48">
      
    </a>
    Allzpark
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/mottosso/allzpark/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mottosso/allzpark
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Guide
      </label>
    
    <a href="./" title="Guide" class="md-nav__link md-nav__link--active">
      Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#in-development" title="In development" class="md-nav__link">
    In development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" title="Goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-management" title="Package Management" class="md-nav__link">
    Package Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-package" title="What is a package?" class="md-nav__link">
    What is a package?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolve" title="Resolve" class="md-nav__link">
    Resolve
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisities" title="Prerequisities" class="md-nav__link">
    Prerequisities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#your-first-project" title="Your first project" class="md-nav__link">
    Your first project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spiderman" title="Spiderman" class="md-nav__link">
    Spiderman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#your-first-application" title="Your first application" class="md-nav__link">
    Your first application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-application" title="Another application" class="md-nav__link">
    Another application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weak-references" title="Weak References" class="md-nav__link">
    Weak References
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allzpark" title="Allzpark" class="md-nav__link">
    Allzpark
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#under-development" title="Under Development" class="md-nav__link">
    Under Development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-packages" title="Shared Packages" class="md-nav__link">
    Shared Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-order" title="Loading Order" class="md-nav__link">
    Loading Order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-path" title="Package Path" class="md-nav__link">
    Package Path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pip" title="Pip" class="md-nav__link">
    Pip
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scoop" title="Scoop" class="md-nav__link">
    Scoop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localisation" title="Localisation" class="md-nav__link">
    Localisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overrides" title="Overrides" class="md-nav__link">
    Overrides
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements_1" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment_1" title="Environment" class="md-nav__link">
    Environment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-legacy-viewport" title="Example - Legacy Viewport" class="md-nav__link">
    Example - Legacy Viewport
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../reference/" title="Reference" class="md-nav__link">
      Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rez/" title="Packaging" class="md-nav__link">
      Packaging
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../examples/" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../shells/" title="Shells" class="md-nav__link">
      Shells
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../windows/" title="Windows" class="md-nav__link">
      Windows
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#in-development" title="In development" class="md-nav__link">
    In development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#goal" title="Goal" class="md-nav__link">
    Goal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-management" title="Package Management" class="md-nav__link">
    Package Management
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-package" title="What is a package?" class="md-nav__link">
    What is a package?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolve" title="Resolve" class="md-nav__link">
    Resolve
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisities" title="Prerequisities" class="md-nav__link">
    Prerequisities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#your-first-project" title="Your first project" class="md-nav__link">
    Your first project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spiderman" title="Spiderman" class="md-nav__link">
    Spiderman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#your-first-application" title="Your first application" class="md-nav__link">
    Your first application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-application" title="Another application" class="md-nav__link">
    Another application
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weak-references" title="Weak References" class="md-nav__link">
    Weak References
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allzpark" title="Allzpark" class="md-nav__link">
    Allzpark
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#under-development" title="Under Development" class="md-nav__link">
    Under Development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-packages" title="Shared Packages" class="md-nav__link">
    Shared Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-order" title="Loading Order" class="md-nav__link">
    Loading Order
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-path" title="Package Path" class="md-nav__link">
    Package Path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pip" title="Pip" class="md-nav__link">
    Pip
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scoop" title="Scoop" class="md-nav__link">
    Scoop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localisation" title="Localisation" class="md-nav__link">
    Localisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overrides" title="Overrides" class="md-nav__link">
    Overrides
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements_1" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment_1" title="Environment" class="md-nav__link">
    Environment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-legacy-viewport" title="Example - Legacy Viewport" class="md-nav__link">
    Example - Legacy Viewport
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
<small class="modified-date"><br><i>Updated 2019-07-09</i></small>

                
                  <a href="https://github.com/mottosso/allzpark/edit/master/docs/pages/guides.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Guide</h1>
                
                <p>The starting point to using and understanding Allzpark.</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60737617-5ba2ab00-9f53-11e9-8a8b-4d7e1d0527eb.png" /></p>
<p><br></p>
<h2 id="in-development">In development</h2>
<p>Allzpark is currently <a href="https://github.com/mottosso/allzpark">being developed</a> and is not yet ready for use. If you're interested in early-access to collaborate and or contribute, <a href="mailto:marcus@abstractfactory.io">get in touch</a>. A 1.0 is scheduled for release in early August 2019.</p>
<p><br>
<br>
<br></p>
<h2 id="goal">Goal</h2>
<blockquote>
<p>Estimated reading time: 20 mins</p>
</blockquote>
<p>By the time you're done with this chapter, you'll be able to call the below command, and understand what it does.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">bleeding_rez-2.31+</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">python-3</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">allzpark</span>
</pre></div>

<p><br></p>
<h2 id="package-management">Package Management</h2>
<p>Allzpark isn't just a pretty face, it's the backbone of any competent production studio working in visual effects, feature animation, commercials or games.</p>
<p>That backbone is made up of <strong>packages</strong>.</p>
<h3 id="what-is-a-package">What is a package?</h3>
<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60737613-55acca00-9f53-11e9-846f-cb482acb1099.png" /></p>
<p>A package is a group of files with some metadata attached, declaring a name, version and its relationship to other packages. When one package requires another, a <em>requirement hierarchy</em> is formed.</p>
<p>For example, consider this requirement.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>requires = [&quot;maya-2019&quot;, &quot;arnold&quot;, &quot;cmuscle&quot;]
</pre></div>

<p>From looking at this, you'd expect a version of <code>arnold</code> and <code>cmuscle</code> compatible with <code>maya-2019</code> (note that we didn't request a particular version of these). Because only a subset of versions of <code>arnold</code> are compatible with <code>maya-2019</code> what happens is a <em>resolve</em>.</p>
<h3 id="resolve">Resolve</h3>
<p>Resolving a request means solving the equation of a <em>requirements hierarchy</em> until exact versions of each package in a request is found, and goes something like this.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">iteration</span> <span style="color: #f8f8f2">01</span> <span style="color: #75715e"># maya-2019 arnold cmuscle</span>
<span style="color: #f8f8f2">iteration</span> <span style="color: #f8f8f2">02</span> <span style="color: #75715e"># maya-2019.0.3 arnold-4.12 cmuscle-1.4</span>
<span style="color: #f8f8f2">iteration</span> <span style="color: #f8f8f2">03</span> <span style="color: #75715e"># maya-2019.0.3 arnold-4.12 cmuscle-1.4 libpng-12 libtiff-1 qt-5.12</span>
<span style="color: #f8f8f2">iteration</span> <span style="color: #f8f8f2">04</span> <span style="color: #75715e"># maya-2019.0.3 arnold-4.9 cmuscle-1.4 libpng-12 libtiff-1 qt-5.12 qtbase-5.12 qtgui-5-12 openiio-3.41</span>
<span style="color: #f8f8f2">complete</span>
</pre></div>

<ol>
<li>In this example, the first iteration is your original request.</li>
<li>The second iteration expands on this request to include specific versions of <code>arnold</code> and <code>cmuscle</code>; both of which are deemed compatible with <code>maya-2019</code>.</li>
<li>Now things start to get interesting, where did <code>libpng-12</code> come from?! Well, that's a requirement of <code>arnold-4.12</code>, so if we want <code>arnold</code> we're going to have to get its other requirements too.</li>
<li>But see, now things get even more interesting. <code>arnold-4.12</code> was just downgraded to <code>arnold-4.9</code>! That's because <code>openiio</code> was a requirement of <code>qt</code> and conflicts with <code>arnold-4.12</code>. As a result, an older version of <code>arnold</code> was picked, one that is compatible with <code>openiio-3.41</code>.</li>
</ol>
<div class="admonition hint">
<p class="admonition-title">Fun fact</p>
<p>That last step is one of the thing that separates Rez from package managers like <code>pip</code> and <code>conda</code>; the retroactive downgrading of a version to conform to a given constraint. This is one of the things that makes Rez <strong>more capable</strong> and <strong>safer</strong> than your typical resolver.</p>
</div>
<p>As you can see, the number of iterations and complexity therein can grow significantly. It is not uncommon for the number of packages involved to grow into the hundreds and run for dozens to hundreds of iterations per solve, with both off-the-shelf software like above and internally developed projects intermingled. Think about what you would have to go through to solve such a hierarchy yourself - which many do.</p>
<p><br></p>
<h2 id="prerequisities">Prerequisities</h2>
<p>To resolve requirements, we'll utilise <a href="">bleeding-rez</a>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>pip install bleeding-rez
rez <span style="color: #f8f8f2">bind</span> --quickstart
rez --version
<span style="color: #75715e"># bleeding-rez 2.33.1</span>
</pre></div>

<p><strong>Troubleshooting</strong></p>
<details class="quote"><summary><code>pip</code> not found</summary><p>It's possible you have <code>pip</code> installed, just not on your <code>PATH</code>. Try this.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">-m</span> <span style="color: #f8f8f2">pip</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">bleeding-rez</span>
</pre></div>

<p>If this doesn't work, let's install pip.</p>
<ul>
<li><a href="https://pip.pypa.io/en/stable/installing/">Reference</a></li>
</ul>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python get-pip.py
</pre></div>

</details>
<details class="quote"><summary><code>Permission denied</code></summary><p>The above command assumes admin/sudo access to your machine which isn't always the case. If so, you can install Rez using a virtual environment.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>$ python -m pip install virtualenv
$ python -m virtualenv rez-install
$ rez-install<span style="color: #ae81ff">\S</span>cripts<span style="color: #ae81ff">\a</span>ctivate
<span style="color: #f92672">(</span>rez-install<span style="color: #f92672">)</span> $ pip install bleeding-rez
</pre></div>

</details>
<details class="quote"><summary><code>rez</code> not found</summary><p>If installation went successfully, but you aren't able to call <code>rez</code> then odds are the Python executable path isn't on your <code>PATH</code>. On Windows, this directory is typically at <code>c:\python37\scripts</code> but may vary depending on how Python was installed, and varies across platforms.</p>
<p>Following the installation of <code>rez</code>, you should have gotten a message about which path was missing from your <code>PATH</code>, you can either add this yourself, or use the <code>virtualenv</code> method from the above <code>Permission denied</code> box.</p>
</details>
<p>This will make <code>rez</code> available via the command-line and establish a few default "packages" in your <code>~/packages</code> directory, which we'll talk about later.</p>
<p><br></p>
<h2 id="your-first-project">Your first project</h2>
<p>In order launch an application in the context of a project using Allzpark, we must create one.</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60737328-46794c80-9f52-11e9-9601-7cf7d58f96ee.png" /></p>
<h3 id="spiderman">Spiderman</h3>
<p>Your project will be a directory with a file inside called <code>package.py</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">mkdir</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">cd spiderman</span>
<span style="color: #f8f8f2">touch</span> <span style="color: #f8f8f2">package.py</span>
</pre></div>

<p>This will create a new file called <code>package.py</code> in your newly created <code>spiderman</code> directory. Edit this file with the following.</p>
<p><strong>package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;spiderman&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.0&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>
</pre></div>

<p>Now we can "build" and make use of it.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">build</span> <span style="color: #f8f8f2">--install</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> 
</pre></div>

<blockquote>
<p>The <code>&gt;</code> character denotes that you are in a Rez "context", which is its virtual environment.</p>
</blockquote>
<h3 id="environment">Environment</h3>
<p>Let's keep going</p>
<p><strong>package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;spiderman&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.1&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PROJECT_NAME&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Spiderman&quot;</span>
</pre></div>

<p>Now what happens?</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">exit</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">build</span> <span style="color: #f8f8f2">--install</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">Write-Host</span> <span style="color: #f8f8f2">$env:PROJECT_NAME</span>
<span style="color: #f8f8f2">Spiderman</span>
</pre></div>

<h3 id="requirements">Requirements</h3>
<p>Great, we're now in control over the environment of this package. What about requirements?</p>
<p><strong>package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;spiderman&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.2&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>
<span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;texteditor&quot;</span><span style="color: #f8f8f2">]</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PROJECT_NAME&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Spiderman&quot;</span>
</pre></div>

<p>Now <code>spiderman</code> requires <code>texteditor</code> in order to run. Let's build it.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>&gt; $ <span style="color: #f8f8f2">exit</span>
$ rez build --install
<span style="color: #ae81ff">09</span>:15:46 ERROR    PackageFamilyNotFoundError: package family not found: texteditor
</pre></div>

<h3 id="your-first-application">Your first application</h3>
<p>Woops! We haven't got a package for <code>texteditor</code>, let's make one.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">exit</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">cd ..</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">mkdir</span> <span style="color: #f8f8f2">texteditor</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">cd texteditor</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">touch</span> <span style="color: #f8f8f2">package.py</span>
</pre></div>

<p><strong>texteditor/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;texteditor&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.0&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #f92672">import</span> <span style="color: #f8f8f2">os</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">alias</span>

    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">os</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;nt&quot;</span><span style="color: #f8f8f2">:</span>
        <span style="color: #f8f8f2">alias(</span><span style="color: #e6db74">&quot;texteditor&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;notepad&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
        <span style="color: #f8f8f2">alias(</span><span style="color: #e6db74">&quot;texteditor&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;nano&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p>Now let's build and use this package.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">build</span> <span style="color: #f8f8f2">--install</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">texteditor</span>
</pre></div>

<p>Viola, a platform-dependent text editor, tied to a given project. This is one way of tying applications to a project, but we'll look at some more as we go along. In general, you'll want to keep packages self-contained and portable, such that you can deploy them elsewhere. In this case, we utilised a widely accessible application we can expect to exist on almost any workstation. But we aren't always so lucky.</p>
<h3 id="another-application">Another application</h3>
<p>Let's make another one to illustrate this point.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">exit</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">cd ..</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">mkdir</span> <span style="color: #f8f8f2">maya</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">cd maya</span>
<span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">touch</span> <span style="color: #f8f8f2">package.py</span>
</pre></div>

<p><strong>maya/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;maya&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;2018.0&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #f92672">import</span> <span style="color: #f8f8f2">os</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">alias</span>

    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">os</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;nt&quot;</span><span style="color: #f8f8f2">:</span>
        <span style="color: #f8f8f2">alias(</span><span style="color: #e6db74">&quot;maya&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">r&quot;c:\program files\autodesk\maya2018\bin\maya.exe&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
        <span style="color: #f8f8f2">alias(</span><span style="color: #e6db74">&quot;maya&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;/usr/autodesk/maya2018/bin/maya.bin&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p>In this example, we're making some assumptions that may or may not be appropriate for your environment. If you are in control over workstations and installation paths, then this is fine. But if you can't make that guarantee, you'll care about <em>portability</em> which we'll cover a little later.</p>
<div class="admonition example">
<p class="admonition-title">Exercise</p>
<p>Before we move on, make another package for <code>maya-2019</code> as well in a similar fashion. We'll need this for later.</p>
</div>
<p><br></p>
<h2 id="weak-references">Weak References</h2>
<p>Let's now update our project to require <code>maya</code> and see what we end up with.</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60737361-6a3c9280-9f52-11e9-8139-7ccc67b2c60c.png" /></p>
<p><strong>spiderman/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;spiderman&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.3&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>
<span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;texteditor-1&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;maya-2018&quot;</span><span style="color: #f8f8f2">]</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PROJECT_NAME&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Spiderman&quot;</span>
</pre></div>

<p>To run it..</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">maya</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">texteditor</span>
</pre></div>

<p>As you can see, you now have both <code>maya</code> and <code>texteditor</code> available, at the same time. This typically is not what you want, and comes with a few gotchas. Consider for example if <code>texteditor</code> had a requirement for another project, such as <code>msvcrt&lt;=2011</code>, and that <code>maya</code> has a similar but conflicting requirement, such as <code>msvcrt&gt;=2013</code>. In isolation, this isn't a problem, because you can happily run <code>texteditor</code> without requiring <code>maya</code> and vice versa. But because these are both requirements of <code>spiderman</code>, you've now made <code>spiderman</code> impossible to use.</p>
<p>To account for this, we need to use "weak" references for both <code>texteditor</code> and <code>maya</code>.</p>
<p><strong>spiderman/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;spiderman&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.4&quot;</span>
<span style="color: #f8f8f2">build_command</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">False</span>
<span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;~texteditor-1&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;~maya-2018&quot;</span><span style="color: #f8f8f2">]</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PROJECT_NAME&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Spiderman&quot;</span>
</pre></div>

<p>Now when <code>spiderman</code> is requested, neither <code>maya</code> nor <code>texteditor</code> is included.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">~/spiderman</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">build</span> <span style="color: #f8f8f2">--install</span>
<span style="color: #f8f8f2">~/spiderman</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span>
<span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">~/spiderman</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">maya</span>
<span style="color: #75715e"># Unrecognised command</span>
</pre></div>

<p>Instead, you ask for them as part of your request.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">spiderman/</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">exit</span>
<span style="color: #f8f8f2">spiderman/</span> <span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">spiderman</span> <span style="color: #f8f8f2">maya</span>
<span style="color: #75715e"># resolved packages:</span>
<span style="color: #75715e"># maya-2018.0  ~\packages\maya\2018.0</span>
</pre></div>

<p>But then, what was the point of making these requirements of <code>spiderman</code> if they weren't going to become part of the resolve unless? Surely you can just leave them out, and include <code>maya</code> in the request?</p>
<p>If you notice above, the resolved package was <code>maya-2018</code>. If it wasn't for this weak reference, Rez would have picked the latest version, <code>maya-2019</code>.</p>
<p>This is how you can tie applications to your project, without including each of them into the same context. Think about how chaotic this would be if your project involved dozens of applications!</p>
<p><br></p>
<h2 id="allzpark">Allzpark</h2>
<p>So you've made a project and given it a unique environment and applications. What's stopping you from launching these applications directly from the command-line? Why do you need Allzpark?</p>
<p>You don't!</p>
<p>Every command we've typed so far has been entirely in the hands of Rez and you can safely run productions in this way. What Allzpark does is put a face on this system, something for the less technical-minded artists to wrap their heads around, and establish a few ground-rules about how to make the most out of Rez. We'll get into these rules a little later, but for now, let's see what Allzpark looks like on your machine.</p>
<p>For this next part, we'll need <code>git</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">git</span> <span style="color: #f8f8f2">--verison</span>
<span style="color: #75715e"># git version 2.16.1</span>
</pre></div>

<details class="quote"><summary><code>git</code> not found</summary><p>Git is required in later chapters, so you may as well get it up and running right away.</p>
<ul>
<li><a href="https://git-scm.com/">https://git-scm.com/</a></li>
</ul>
</details>
<p>Allzpark is a Python package, and whilst we <em>could</em> install it like any other Python package, what we're going to do instead is install it as another Rez package. For that, we'll need <code>pipz</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">git</span> <span style="color: #f8f8f2">clone</span> <span style="color: #f8f8f2">https</span><span style="color: #960050; background-color: #1e0010">:</span><span style="color: #f8f8f2">//github.com/mottosso/rez-pipz.git</span>
<span style="color: #f8f8f2">cd rez-pipz</span>
<span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">build</span> <span style="color: #f8f8f2">--install</span>
</pre></div>

<p><code>pipz</code> is a wrapper around <code>pip</code> for use with Rez. It can take any request <code>pip</code> can, and turn it into a Rez package. This saves from having to create a Rez package ourselves, when it's already a Python package. Neat!</p>
<p>To test out the installation, let's install <code>six</code> as Rez package.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pipz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">six</span> <span style="color: #f8f8f2">-y</span>
</pre></div>

<p>This is the equivalent of <code>pip install six</code>. Now let's try it with Allzpark.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">git</span> <span style="color: #f8f8f2">clone</span> <span style="color: #f8f8f2">https</span><span style="color: #960050; background-color: #1e0010">:</span><span style="color: #f8f8f2">//github.com/mottosso/allzpark.git</span>
<span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pipz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">./allzpark</span>
</pre></div>

<p>In this case, we'll install Allzpark from the cloned repository directly (as it isn't yet on PyPI). We'll also need a Qt binding. Any binding will do, in this example we'll use PySide2.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pipz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">-y</span>
</pre></div>

<p>And there you have it. We are now ready to launch Allzpark.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">--root</span> <span style="color: #f8f8f2">~/packages</span>
</pre></div>

<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60429751-aa6ae080-9bf3-11e9-82bf-cc79ce99fe5c.png" /></p>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<h2 id="under-development">Under Development</h2>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br></p>
<h2 id="shared-packages">Shared Packages</h2>
<p>One of the thing that separates Res from other package managers like <code>virtualenv</code> and <code>conda</code> is that packages you install are <em>shared</em>. Not only can they be shared across multiple machines, but also across multiple operating systems. Once a package has been installed, you'll never have to install it again. It is permanent, immutable in fact. This is how you can build up a personal- or studio-repository of packages that you can build a pipeline upon, making strong and controlled assumptions about what packages are available, which version they are at, and that they are compatible with each other.</p>
<p>So far, we've installed all packages into their default location, which is <code>~/packages</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span>ls <span style="color: #f8f8f2">$env</span>:USERPROFILE/packages  <span style="color: #75715e"># With PowerShell</span>
ls <span style="color: #f8f8f2">$HOME</span>/packages  <span style="color: #75715e"># With Bash</span>
</pre></div>

<p><br></p>
<h2 id="loading-order">Loading Order</h2>
<p>If your graphical application depends on Qt.py, then Qt.py needs to be loaded <em>before</em> your application. This is where loading order comes in. By establishing a requirements hierarchy, the order in which libraries load is included for free.</p>
<p><br></p>
<h2 id="package-path">Package Path</h2>
<p>The recommended layout for Rez packages are as follows.</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/2152766/60429696-8c04e500-9bf3-11e9-8b27-af355969d0bf.png" /></p>
<ul>
<li><code>int/</code> Internal projects, such as <code>core_pipeline</code>. You develop and release new versions internally.</li>
<li><code>ext/</code> External projects, such as <code>pyblish</code> and <code>Qt.py</code>, you typically install these with <code>rez env pipz -- install</code></li>
<li><code>td/</code> Packages developed by TDs themselves, such as small utility scripts</li>
<li><code>proj/</code> Project such as <code>ATC</code> and <code>MST3</code></li>
<li><code>app/</code> Applications, such as <code>maya</code> and <code>nuke</code></li>
<li><code>converted/</code> Automatically converted packages from the old Template-based system</li>
</ul>
<p>There are two additional paths.</p>
<ul>
<li><code>~/packages</code> Your local development packages, from your home directory</li>
<li><code>~/.packages</code> Your <a href="#localisation">localised packages</a></li>
</ul>
<p><br></p>
<h2 id="pip">Pip</h2>
<p>Any package from PyPI can be installed using a utility package called <code>pipz</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pipz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">pyblish-base</span> <span style="color: #f8f8f2">--release</span>
</pre></div>

<ul>
<li>See <a href="https://github.com/mottosso/rez-pipz">rez-pipz</a> for details.</li>
</ul>
<p><br></p>
<h2 id="scoop">Scoop</h2>
<p>Any package from Scoop can be installed using another utility package called <code>scoopz</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">scoopz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">install</span> <span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">python27</span> <span style="color: #f8f8f2">git</span>
</pre></div>

<ul>
<li>See <a href="https://github.com/mottosso/rez-scoopz">rez-scoopz</a> for details.</li>
</ul>
<p><br></p>
<h2 id="localisation">Localisation</h2>
<p>For greater performance, any package may be localised to your local disk.</p>
<ul>
<li>See <a href="https://github.com/mottosso/rez-localz">rez-localz</a> for details.</li>
</ul>
<p><strong>Example</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">bleeding_rez</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">-m</span> <span style="color: #f8f8f2">allzpark</span>
<span style="color: #f8f8f2">==============================</span>
 <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">(1.1.79)</span>
<span style="color: #f8f8f2">==============================</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">Rez..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.75s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">Qt..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">6.14s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">allzpark..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.53s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">preferences..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.00s</span>
<span style="color: #f8f8f2">------------------------------</span>
</pre></div>

<p>Notice how long it took to load <code>Qt</code>, let's localise this.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">localz</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">localise</span> <span style="color: #f8f8f2">PySide2</span>
</pre></div>

<p>Now try launching again.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">$</span> <span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">bleeding_rez</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">-m</span> <span style="color: #f8f8f2">allzpark</span>
<span style="color: #f8f8f2">rez</span> <span style="color: #f8f8f2">env</span> <span style="color: #f8f8f2">pyside2</span> <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">bleeding_rez</span> <span style="color: #f8f8f2">--</span> <span style="color: #f8f8f2">python</span> <span style="color: #f8f8f2">-m</span> <span style="color: #f8f8f2">allzpark</span>
<span style="color: #f8f8f2">==============================</span>
 <span style="color: #f8f8f2">allzpark</span> <span style="color: #f8f8f2">(1.1.79)</span>
<span style="color: #f8f8f2">==============================</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">Rez..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.91s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">Qt..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.36s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">allzpark..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.70s</span>
<span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">Loading</span> <span style="color: #f8f8f2">preferences..</span> <span style="color: #f8f8f2">ok</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">0.00s</span>
<span style="color: #f8f8f2">------------------------------</span>
</pre></div>

<p>That's much better.</p>
<p><strong>Disk Space</strong></p>
<p>To save disk space, you can delete any or all localised packages from your <code>~/.packages</code> path.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">start </span><span style="color: #66d9ef">%</span><span style="color: #f8f8f2">USERPROFILE%\.packages</span>
</pre></div>

<p><br></p>
<h2 id="overrides">Overrides</h2>
<p>Packages, like Python modules, are discovered from a list of paths. If there are identical packages on two or more paths, the first one is picked.</p>
<p>We can leverage this behavior to <em>override</em> one package with another.</p>
<p><br></p>
<h3 id="requirements_1">Requirements</h3>
<p>Overriding requirements enable you to test new packages, or packages of different versions, in an existing project and works like this.</p>
<ol>
<li>Copy project onto local development directory</li>
<li>Edit</li>
<li>Install</li>
</ol>
<p>If the version remains the same <em>or higher</em> then your edited project is now picked up in place of the original, providing final control over which packages are used in a given project.</p>
<p><br></p>
<h3 id="environment_1">Environment</h3>
<p>Overriding environment variables can be achieved in a similar fashion to <a href="#requirements">requirements</a>, but is even more flexible.</p>
<p>Packages with regards to environment variables act akin to CSS, or Cascading Style Sheets, from the world wide web in that every change augments - or cascades - a previous change.</p>
<p><strong>a/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PYTHONPATH&quot;</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(</span><span style="color: #e6db74">&quot;/a&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p><strong>b/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;a&quot;</span><span style="color: #f8f8f2">]</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;PYTHONPATH&quot;</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(</span><span style="color: #e6db74">&quot;/b&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p>In this example, the package <code>b</code> augments an existing <code>PYTHONPATH</code> created by package <code>a</code>. It does so by <em>appending</em> the value <code>"/b"</code>. You can also <code>prepend</code> and overwrite by assigning it directly.</p>
<ul>
<li><code>env[].append("")</code></li>
<li><code>env[].prepend("")</code></li>
<li><code>env[] = ""</code></li>
</ul>
<p><br></p>
<h4 id="example-legacy-viewport">Example - Legacy Viewport</h4>
<p>We can leverage this behavior to override the behavior of a program using dedicated "override packages".</p>
<p><strong>maya_legacy_viewport/package.py</strong></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #f8f8f2">name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;maya_legacy_viewport&quot;</span>
<span style="color: #f8f8f2">version</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1.0&quot;</span>
<span style="color: #f8f8f2">requires</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span><span style="color: #e6db74">&quot;maya&quot;</span><span style="color: #f8f8f2">]</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">commands</span><span style="color: #f8f8f2">():</span>
    <span style="color: #66d9ef">global</span> <span style="color: #f8f8f2">env</span>
    <span style="color: #f8f8f2">env[</span><span style="color: #e6db74">&quot;MAYA_ENABLE_LEGACY_VIEWPORT&quot;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;1&quot;</span>
</pre></div>

<p>Including this package in your resolve results in Maya exposing the Legacy Viewport option, to circumvent that pesky Viewport 2.0.</p>
<p><br></p>
<h3 id="_1"></h3>
                
                  
                
              

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
          <a href="../reference/" title="Reference" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Reference
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 mottosso
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>